<!--keywords:音视频通话,采集音量,播放音量,耳返 -->
在音视频通话和互动直播过程中，为了提高产品使用者的体验，NERTC SDK 支持调整各种声音的音量，例如调整 SDK 采集的声音、播放的声音等。音量调节功能适用于多种需要自定义调节音量的场景。

除此之外，NERTC SDK 也支持通过**监听回调**的方式获取房间内成员的音量。在一些语音连麦场景或者视频会议场景中，产品应用层常常需要**获取发言者的音量**，并通过 UI 进行音量展示，或者根据发言者的音量大小进行视图布局的动态调整。详细信息请参考<a href="/docs/jcyOTA0ODM/zEyMDQ1Mzg" target="_blank">监测发言者音量</a>。

此外，本文档将在末尾为您介绍 NERTC SDK 相关**音频接口**的实现原理和适用场景，具体内容请点击[音频主要接口对比](#音频主要接口对比)查看。

## <span id="设置采集音量">设置采集音量</span>

NERTC SDK 通过录音设备采集房间内成员的音频信号，将其录制下来以后播放给远端用户收听。

### 技术原理

![采集.png](https://yx-web-nosdn.netease.im/common/78660b7ea330656a0a4373ebc5d86698/采集.png)

### 实现方法

调用 <a href="https://doc.yunxin.163.com/nertc/api-refer/windows/doxygen/Latest/zh/html/classnertc_1_1_i_audio_device_manager.html#adfbe16d93a02b131d1d38b07fb2df2a3" target="_blank">`adjustRecordingSignalVolume`</a> 方法设置录制声音的信号幅度，从而达到调节采集音量的目的。

该方法通过 `volume` 参数设置录音信号的音量，取值范围为 0 ~ 400：

- 0: 静音。
- 100: （默认值）原始音量，即不对信号做缩放。
- 400: 原始音量的 4 倍，即把信号放大到原始信号的 4 倍。

::: note note
建议设置采集音量时使用默认值（100）或小于该值，否则可能会导致音质问题。
:::

**示例代码**如下：
```
//将采集音量设置为100
nertc_engine_->adjustRecordingSignalVolume(100);
```

## <span id="设置播放音量">设置播放音量</span>

在音视频通话过程中，音频信号从发送端进入到接收端，然后使用播放设备进行播放。

### 技术原理


![设置播放音量-UE.png](https://yx-web-nosdn.netease.im/common/dd3db2ef52cc2f2f9bb2965781f0b424/设置播放音量-UE.png)


调用 <a href="https://doc.yunxin.163.com/nertc/api-refer/windows/doxygen/Latest/zh/html/classnertc_1_1_i_audio_device_manager.html#a9e8a48971c91c86899ca3612bcad9e57" target="_blank">`adjustPlaybackSignalVolume`</a> 方法可以调节本地播放的所有远端用户的音量。


参数说明如下表所示。

参数 | 类型 | 描述
---- | -------------- | ---------
volume | int | 播放音量的百分比，取值范围为 [0,400]。<ul><li>0：静音。<li>100：原始音量。<li>400：原始音量的 4 倍（自带溢出保护）。


::: note note
建议设置本地播放音量时使用默认值（100）或小于该值，否则可能会导致音质问题。
:::

**示例代码**如下：
```
//调整本端播放的所有远端用户的播放音量为50
nertc_engine_->adjustPlaybackSignalVolume(50);
//调整本端播放的所有远端用户的播放音量为0，静音所有用户
nertc_engine_->adjustPlaybackSignalVolume(0);
```
      
## <span id="设置耳返音量">设置耳返音量</span>

NERTC SDK 通过录音设备采集房间内成员的音频信号，然后使用播放设备进行播放，实现耳返功能。

### 技术原理

![耳返.png](https://yx-web-nosdn.netease.im/common/b94410e5515985815304d317274f187d/耳返.png)

### 实现方法

调用 <a href="https://doc.yunxin.163.com/nertc/api-refer/windows/doxygen/Latest/zh/html/classnertc_1_1_i_rtc_engine_ex.html#a550356dfd28a11cfb1db95f360c13ffa" target="_blank">`enableEarback`</a> 方法开启耳返功能之后，您可以调用 <a href="https://doc.yunxin.163.com/nertc/api-refer/windows/doxygen/Latest/zh/html/classnertc_1_1_i_rtc_engine_ex.html#af1fccbd78c318eb5a4b753454f88aa93" target="_blank">`setEarbackVolume`</a> 方法设置耳返音量。

该方法通过 `volume` 参数设置播放信号的音量，取值范围为 0 ~ 100，默认值为 100。

**示例代码**如下：
```
//将耳返音量设置为100
device_manager_->enableEarback(100);
```

## <span id="音频主要接口对比">音频主要接口对比</span>

| <div style="width:190px">接口名称</div> |  <div style="width:140px">功能及适用场景</div> | <div style="width:100px">实现原理图解</div> | 
|---|---|---|
| <a href="https://doc.yunxin.163.com/nertc/api-refer/UE/doxygen/Latest/zh/html/classnertc_1_1_i_rtc_engine.html#aad59ec2e1bb9983860d175b2a5dae0a6" target="_blank">enableLocalAudio</a> |开启或关闭本地音频采集和发送| ![enablelocalaudio.png](https://yx-web-nosdn.netease.im/common/44f646facce3acb50b48ff2974d5d3ed/enablelocalaudio.png) |
|^^ | 适用于简单的音频开关场景| ^^ |
| <a href="https://doc.yunxin.163.com/nertc/api-refer/UE/doxygen/Latest/zh/html/classnertc_1_1_i_rtc_engine_ex.html#a6d69397244e5749e8b2562eb74c3c2db" target="_blank">enableMediaPublish</a> |开启或关闭本地媒体流（主流）的发送| ![enablemediapub.png](https://yx-web-nosdn.netease.im/common/f3c53580398d7aee8e9dd94bfbe235b4/enablemediapub.png) |
| ^^ |适用于单独开启麦克风但不发送音频的场景，比如**会议**场景、**大房间**|^^ |
| <a href="https://doc.yunxin.163.com/nertc/api-refer/UE/doxygen/Latest/zh/html/classnertc_1_1_i_rtc_engine_ex.html#ae5a9a1261702039d9d636997706de7e8" target="_blank">muteLocalAudioStream</a> |开启或关闭本地音频主流的发送| ![mutelocalaudio.png](https://yx-web-nosdn.netease.im/common/cca453abf8387a51a0cab2f8f054a87b/mutelocalaudio.png)|
| ^^ |适用于需要**频繁**静音\取消静音操作的场景|^^ |
| <a href="https://doc.yunxin.163.com/nertc/api-refer/UE/doxygen/Latest/zh/html/classnertc_1_1_i_audio_device_manager.html#a79b8bcf650bec75267cc5b1412822bc1" target="_blank">setRecordDeviceMute</a> |静音音频采集设备| ![setRecordDeviceMute-PC端.png](https://yx-web-nosdn.netease.im/common/67beb3e037cf3331ac2b034e5ead281b/setRecordDeviceMute-PC端.png) |
| ^^ |适用于麦克风采集和伴音同时开启时，只发送**伴音**音频的场景|^^ |
| <a href="https://doc.yunxin.163.com/nertc/api-refer/UE/doxygen/Latest/zh/html/classnertc_1_1_i_rtc_engine_ex.html#ae6f025572db61b2da98058a3842a0cfe" target="_blank">adjustRecordingSignalVolume</a> |调节采集信号音量| ![adjustRecordingSignalVolume.png](https://yx-web-nosdn.netease.im/common/91483823a8357d5fbb3f9f2301491bb5/adjustRecordingSignalVolume.png) |
| ^^ |适用于需要精确调整本地音频采集（包括外部输入）音量的场景，比如 **KTV**、**语聊房**|^^ |

