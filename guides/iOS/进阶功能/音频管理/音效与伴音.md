<!--keywords:音视频通话,音效,伴音,混音 -->

在音视频通话或直播场景中，默认情况下只有房间成员本人说话的人声。出于烘托气氛、营造多样化语音环境的需求，NERTC SDK 支持通过混音功能播放多个掌声、口哨等短时音效，或者为人声添加背景音乐、伴奏音乐或其他场景效果，并将合成后的声音播放给房间内其他成员。

## <span id="功能概述">功能概述</span>

混音，指 SDK 从 App 获取一路音频数据，将 App 提供的音频数据与 SDK 采集的音频数据整合为一路音频数据，通常用于音乐直播、在线KTV、连麦PK、游戏直播等场景。

NERTC SDK 提供混音相关方法，实现播放短时音效和背景音乐的功能。

- 播放短时音效：
  
  指通话或直播中播放短时音频文件，一般用于渲染房间气氛，例如游戏音效、掌声、口哨、欢呼声、笑声的短时音效。支持多个音效叠加播放。

- 播放背景音乐：

  伴音功能支持在房间中播放本地或者在线音乐文件，作为通话或直播时的背景声音，同时让房间内的其他人听到此音乐。NERTC 播放伴音方法可以用来播放比较长的背景音，例如伴奏音乐、环境白噪声、背景音乐等等。

  
  NERTC 支持在麦克风关闭的状态下，发送伴音。在娱乐社交、在线教育等场景中，即使用户不想要开启麦克风进行语音聊天，也能在房间内播放背景音乐。
  
NERTC SDK 混音功能支持如下设置：

- 混音：支持将音乐文件的音频流跟麦克风采集的音频流（主流）进行叠加并编码发送给对方，同时伴音功能支持通过辅流通道传输音乐文件的音频流。

- 循环：可以设置是否循环播放混音文件，以及循环次数。

- 音量控制：可以各自控制本地播放以及编码发送的混音音量。

- 音调控制：可以按半音音阶调整本地播放的音乐文件的音调。例如在 K 歌场景中，为了使歌曲更适合主播的声线音域，主播可以调整伴音的音调，升高或降低伴奏的音阶。

- 定位：混音任务支持从背景音乐文件的任意位置开始播放。

- 叠加：可以同时播放多个短时音效文件。

## <span id="注意事项">注意事项</span>

- 伴音相关方法的返回值不等于 0，表示方法调用失败。
- 加入房间前或加入房间后，均可启动音效和伴音。
- 本地混音文件支持 MP3、M4A、AAC、3GP、WMA、WAV 格式，支持本地文件和在线 URL。
- 可通过 [`onAudioMixingStateChanged`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_n_e_rtc_engine_delegate_ex-p.html#ae81ee7d38d0c5607803f4e73c4dd4acd) 回调接收音乐文件播放状态改变的相关信息，如果播放出错，可通过对应错误码排查故障。

## 示例项目源码
网易云信提供[音效与伴音的示例项目源码 SetBackgroundMusic](https://github.com/netease-im/G2-API-Examples/tree/main/ios/Advanced/SetBackgroundMusic)，您可以参考该源码实现音效与伴音。

## <span id="配置音效">配置音效</span>

### 配置步骤

1. 调用 [`playEffectWitdId`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a97c8f67940de3664677319f44ddad14c) 方法播放指定 effectId 的音效文件。调用此方法时，您需要设置 option 参数指定播放的音效文件。相关参数的含义如下表。

|参数|参数说明|
|--|--|
|path|指定音效文件的路径，例如 `D:\\audio_files\\test.mp3`。支持本地绝对路径或 URL 地址。|
|effectId|指定音效文件的 ID。|
|loopCount|指定音效文件循环播放的次数。该参数为正整数，可取最大值为 10000，默认值为 1，即默认仅播放一次。若该值小于等于 0，则默认为无限循环播放。|
|sendEnabled|是否将音效发送至远端。该参数的默认值为 YES，即远端用户可以听到该音效。|
|sendVolume|音效文件的发送音量。该参数的取值范围为 0 ~ 200，默认值为 100，表示使用文件的原始音量。|
|playbackEnabled|是否本地播放该音效。默认为 YES，即本地用户可以听到该音效。|
|playbackVolume|音效文件的播放音量。该参数的取值范围为 0 ~ 200，默认值为 100，表示使用文件的原始音量。|

::: note note
- 您可以多次调用此方法以同时播放多个音效文件，实现音效的叠加。
- 在调用此方法成功播放指定音效文件后，若您反复停止再重新播放该 `effectId` 对应的音效文件，首次播放时设置的 `option` 无效，会恢复为默认值。
:::

2. 音效播放任务管理。开始播放音效后，您还可以通过其他方法实现音效播放任务管理等更多功能，例如：	
- **进度管理**：调用 [`pauseAllEffects`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#acbf23bf2065d79fcd2dd3d3748414bcb) 方法暂停播放所有音效、调用 [`resumeAllEffects`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#aa41b74fcf46fe8941ecef51fb3659f84) 方法恢复播放所有音效、调用 [`setEffectPositionWithId`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a71bd714494f44c4eb56b6eef0efd8b77) 方法设置音效文件的播放位置等，此外也可以通过注册 [`onAudioEffectTimestampUpdateWithId`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_n_e_rtc_engine_delegate_ex-p.html#aaec23293b3d9676358e8cc6b63c71995) 回调以监听音效文件的实时播放进度。
- **音量管理**：调用 [`setEffectSendVolumeWithId`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#ab7447cd7beb928e84b5b41ae1e061a1e) 方法设置音效文件的发送音量、调用 [`setEffectPlaybackVolumeWithId`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a8772100d22231aeaec6631ee8ef30d35) 方法设置音效文件的播放音量。
- **音调管理**：调用 [`setEffectPitchWithId`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a2808eda8a838f15c298eec1fe9ddc930) 方法并通过 `pitch` 参数设置音效文件的音调。
    ::: note note
    - 仅开始播放音效文件后可调用此方法；播放结束后，音调将恢复为默认值。
    - 音调 `pitch` 参数的取值范围为 [-12,12]，默认值为 0，每相邻两个值的音调高度相差半音；取值的绝对值越大，音调升高或降低得越多。
    - 若 SDK 返回 30003，表示参数设置错误；若 SDK 返回 30005，表示引擎尚未初始化或未找到当前音效文件。
    :::
- **获取混音相关信息**：例如通过调用 [`getEffectDurationWithId`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#ae57c7c2e2c035baea273b768079a9ef9) 方法获取音效文件时长、调用 [`getEffectCurrentPositionWithId`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a741eeb7f1182c843bba3ff384c74b786) 方法获取音效文件当前播放进度、调用 [`getEffectPitchWithId`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#abac139baf9ad03d8aaa04e0f1ae8fff1) 方法获取音效文件的音调等。

3. 在离开房间前，调用 [`stopAllEffects`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#afbcd13ffb21744c3546ec8a8480348a7) 方法结束播放所有音效。

### 示例代码

```
// 调用 playEffectWitdId 播放指定的音效文件
NERtcCreateAudioEffectOption *option = [[NERtcCreateAudioEffectOption alloc] init];
option.path = @"path";
option.loopCount = 1;
option.sendEnabled = YES;
option.playbackEnabled = YES;
option.sendVolume = 100;
option.playbackVolume = 100;
[[NERtcEngine sharedEngine] playEffectWitdId:taskID effectOption:option];

// 调用 stopEffectWitdId 结束播放指定音效
[[NERtcEngine sharedEngine] stopEffectWitdId:taskID];

// 调用 pauseEffectWitdId 暂停播放指定音效
[[NERtcEngine sharedEngine] pauseEffectWitdId:taskID];

// 调用 resumeEffectWitdId 恢复播放指定音效
[[NERtcEngine sharedEngine] resumeEffectWitdId:taskID];

// 调用 pauseAllEffects 暂停播放所有音效
[[NERtcEngine sharedEngine] pauseAllEffects];

// 调用 resumeAllEffects 恢复播放所有音效
[[NERtcEngine sharedEngine] resumeAllEffects];

// 调用 setEffectSendVolumeWithId 设置音效文件发送音量
[[NERtcEngine sharedEngine] setEffectSendVolumeWithId:taskID volume:50];

// 调用 getEffectSendVolumeWithId 获取指定音效文件发送音量
uint32_t volume = 0;
[[NERtcEngine sharedEngine] getEffectSendVolumeWithId:taskID volume:&volume];

// 调用 setEffectPlaybackVolumeWithId 设置指定音效文件的播放音量
[[NERtcEngine sharedEngine] setEffectPlaybackVolumeWithId:taskID volume:50];

// 调用 getEffectPlaybackVolumeWithId 获取指定音效文件的播放音量
uint32_t volume = 0;
[[NERtcEngine sharedEngine] getEffectPlaybackVolumeWithId:taskID volume:&volume];

// 调用 setEffectPitchWithId 设置指定音效文件的音调
[[NERtcEngine sharedEngine] setEffectPitchWithId:taskID pitch:6];

// 调用 getEffectPitchWithId 获取指定音效文件的音调
int32_t pitch = 0;
[[NERtcEngine sharedEngine] getEffectPitchWithId:taskID pitch:&pitch];

// 调用 getEffectDurationWithId 获取指定音效文件时长
uint64_t duration = 0;
[[NERtcEngine sharedEngine] getEffectDurationWithId:taskID duration:&duration];

// 调用 getEffectCurrentPositionWithId 获取指定音效文件的播放进度
uint64_t position = 0;
[[NERtcEngine sharedEngine] getEffectCurrentPositionWithId:taskID position:&position];

// 调用 setEffectPositionWithId 设置指定音效文件的播放进度
[[NERtcEngine sharedEngine] setEffectPositionWithId:taskID position:0];

// 调用 stopAllEffects 结束播放所有音效
[[NERtcEngine sharedEngine] stopAllEffects];
```

### API 参考

| **方法** | **功能描述**|
|:--|:--|
|[`playEffectWitdId`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a97c8f67940de3664677319f44ddad14c)|播放指定音效文件|
|[`stopEffectWitdId`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#ace6726d78c04ca9d2887f16aaaf7d541)|停止播放指定音效文件|
|[`pauseEffectWitdId`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#adb25633a80cde0742a9f29afc796f845)|暂停播放指定音效文件|
|[`resumeEffectWitdId`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a6b942e94336cd593d467263c1e0acd0e)|恢复播放指定音效文件|
|[`pauseAllEffects`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#acbf23bf2065d79fcd2dd3d3748414bcb)|暂停播放所有音效文件|
|[`resumeAllEffects`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#aa41b74fcf46fe8941ecef51fb3659f84)|恢复播放所有音效文件|
|[`setEffectSendVolumeWithId`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#ab7447cd7beb928e84b5b41ae1e061a1e)|设置音效文件发送音量|
|[`getEffectSendVolumeWithId`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a14acfef8d29e35a3691b3c5d7ac75e42)|获取音效文件的发送音量|
|[`setEffectPlaybackVolumeWithId`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a8772100d22231aeaec6631ee8ef30d35)|设置音效文件的播放音量|
|[`getEffectPlaybackVolumeWithId`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a52cdfdcf8ef99cad309a88d034080c9a)|获取音效文件的播放音量|
|[`setEffectPitchWithId`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a2808eda8a838f15c298eec1fe9ddc930)|设置音效文件的音调|
|[`getEffectPitchWithId`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#abac139baf9ad03d8aaa04e0f1ae8fff1)|获取音效文件的音调|
|[`setEffectPositionWithId`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a71bd714494f44c4eb56b6eef0efd8b77)|设置音效文件的播放位置|
|[`getEffectDurationWithId`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#ae57c7c2e2c035baea273b768079a9ef9)|获取音效文件时长|
|[`getEffectCurrentPositionWithId`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a741eeb7f1182c843bba3ff384c74b786)|获取音效文件当前播放进度|
|[`stopAllEffects`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#afbcd13ffb21744c3546ec8a8480348a7)|暂停播放所有音效文件|

## <span id="配置伴音">配置伴音</span>

### 配置步骤

1. 初始化伴音配置类，通过 [`NERtcCreateAudioMixingOption`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/interface_n_e_rtc_create_audio_mixing_option.html) 设置伴音任务相关参数，例如伴音文件路径、是否本地播放、是否通过辅流通道传输等等。
    ::: note note
    若您选择通过辅流通道传输伴音音频流，请先调用 [`enableLocalSubStreamAudio`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#adaba86b871e0740fd1316b9011c998a1) 方法开启音频辅流。
    :::
2. 调用 [`startAudioMixingWithOption`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a88d69ad7016f3a7bb00cae1af4f91c2e) 创建伴音任务。
3. 伴音任务管理。开始伴音后，还可以通过其他方法实现伴音任务管理等更多功能，例如：
    - **进度管理**: 通过 [`pauseAudioMixing`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a72cd9002c8ed4835fb4b45c6e6728a84) 和 [`resumeAudioMixing`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#ac5ed4a3bac62e7a0759910440c2c8437) 暂停或恢复伴音、通过 [`setAudioMixingPosition`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#abe96939419d17726feb60c337c057b0c) 设置伴音文件的播放进度。
    - **音量管理**：通过 [`setAudioMixingPlaybackVolume`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#ae3a90985c2664c32f74d4e798aa805fd) 和 [`setAudioMixingSendVolume`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#ac70f711961f0d8806961d77eb8588cfe) 等方法设置伴音的播放音量、发送音量。
    - **音调管理**：调用 [`setAudioMixingPitch`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a3045c73ffaaf646075caa4880869b40b) 方法并通过 `pitch` 参数设置伴音文件的音调。
        ::: note note
        - 仅开始伴音后可调用此方法；伴音结束后，音调将恢复为默认值。
        - 音调 `pitch` 参数的取值范围为 [-12,12]，默认值为 0，每相邻两个值的音调高度相差半音；取值的绝对值越大，音调升高或降低得越多。
        - 若 SDK 返回 30003，表示参数设置错误；若 SDK 返回 30005，表示引擎尚未初始化或未找到当前伴音文件。
        :::
    - **获取伴音相关信息**：例如通过 [`getAudioMixingCurrentPosition`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a9e6605ed76e0013efd3002bd614d29f5) 等接口获取伴音文件的播放进度、调用 [`getAudioMixingPitch`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a3f98e6d9d1888f336754c4edca2c0767) 方法获取伴音文件的音调等。
5. 在离开房间前调用 [`stopAudioMixing`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#ac16605f60b0a29e51efeadabc3e84540) 结束伴音。

### <span id="示例代码">示例代码</span>

```objc
NSString *path = [[NSBundle mainBundle] pathForResource:@"1" ofType:@"m4a"];
NERtcCreateAudioMixingOption option = [[NERtcCreateAudioMixingOption alloc] init];
option.path = path;               //伴音文件路径
option.playbackEnabled = YES;    //是否本地播放(默认为YES)
option.playbackVolume = 100;      //本地播放音量
option.sendEnabled = YES;        //是否编码发送(默认为YES)
option.sendVolume = 100;          //发送音量
option.loopCount = 1;             //循环次数
option.startTimeStamp = 0;        //音乐文件开始播放的时间，UTC 时间戳
option.sendWithAudioType = NERtcAudioStreamType.kNERtcAudioStreamMain; //伴音跟随音频主流还是辅流，默认跟随主流
int ret = 
int ret = 
[self.engine startAudioMixingWithOption:option]; //开始伴音任务
if (ret == kNERtcNoError) {
    //创建伴音任务成功
} else {
    //创建伴音任务失败
}

// 暂停、恢复伴音任务
[self.engine pauseAudioMixing];
[self.engine resumeAudioMixing];

// 获取和设置本地播放伴音的音量，范围为 0 ~ 100
int volume = 0;
[self.engine getAudioMixingPlaybackVolume:&volume];
[self.engine setAudioMixingPlaybackVolume:volume];

// 获取和设置编码发送伴音的音量，范围为 0 ~ 100
//int volume;
[self.engine getAudioMixingSendVolume:&volume];
[self.engine setAudioMixingSendVolume:volume];

// 获取和设置本地播放伴音的音调，范围为 -12 ~ 12
//int pitch;
[self.engine getAudioMixingPitch:&pitch];
[self.engine setAudioMixingPitch:pitch];

// 获取伴音文件总时长
uint64_t duration;
[self.engine getAudioMixingDuration:&duration];
// 获取当前伴音文件播放位置
uint64_t position;
[self.engine getAudioMixingCurrentPosition:&position];

// 设置伴音文件播放位置
[self.engine setAudioMixingPosition:position];

// 结束伴音任务
[self.engine stopAudioMixing];
```

### <span id="API 参考">API 参考</span>

| **方法** | **功能描述**|
|:--|:--|
|[`startAudioMixingWithOption`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a88d69ad7016f3a7bb00cae1af4f91c2e)|开始伴音|
|[`enableLocalSubStreamAudio`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#adaba86b871e0740fd1316b9011c998a1)|开启音频辅流|
|[`stopAudioMixing`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#ac16605f60b0a29e51efeadabc3e84540)|结束伴音|
|[`pauseAudioMixing`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a72cd9002c8ed4835fb4b45c6e6728a84)|暂停伴音|
|[`resumeAudioMixing`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#ac5ed4a3bac62e7a0759910440c2c8437)|恢复伴音|
|[`setAudioMixingPlaybackVolume`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#ae3a90985c2664c32f74d4e798aa805fd)|设置伴音文件的播放音量|
|[`setAudioMixingSendVolume`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#ac70f711961f0d8806961d77eb8588cfe)|设置伴音文件的发送音量|
|[`setAudioMixingPitch`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a3045c73ffaaf646075caa4880869b40b)|设置伴音文件的音调|
|[`getAudioMixingPlaybackVolume`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#ae38d3a1399b7872f8627e4888c06fd51)|获取伴音文件的播放音量|
|[`getAudioMixingSendVolume`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#ae38d3a1399b7872f8627e4888c06fd51)|获取伴音文件的发送音量|
|[`getAudioMixingPitch`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a3f98e6d9d1888f336754c4edca2c0767)|获取伴音文件的音调|
|[`getAudioMixingDuration`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a7c1426d6684fea766d8effbe2bbd889e)|获取伴音文件的总长度|
|[`setAudioMixingPosition`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#abe96939419d17726feb60c337c057b0c)|设置伴音文件的播放进度|
|[`getAudioMixingCurrentPosition`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a9e6605ed76e0013efd3002bd614d29f5)|获取伴音文件的当前播放进度|

<br>


| **事件** | **事件描述** |
|:--|:--|
|[`onAudioMixingStateChanged`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_n_e_rtc_engine_delegate_ex-p.html#ae81ee7d38d0c5607803f4e73c4dd4acd)|本地用户的伴音文件播放状态改变回调|
|[`onAudioMixingTimestampUpdate`](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_n_e_rtc_engine_delegate_ex-p.html#ae888ffd7ce5f4b3339caa39b0ace1d76)|伴音文件播放进度回调|

## 常见问题

- [为什么我开启伴音效果后，对方听不清我的人声？](https://doc.yunxin.163.com/docs/jcyOTA0ODM/jcxMzE3MTE?platformId=50192#%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91%E5%BC%80%E5%90%AF%E4%BC%B4%E9%9F%B3%E6%95%88%E6%9E%9C%E5%90%8E%EF%BC%8C%E5%AF%B9%E6%96%B9%E5%90%AC%E4%B8%8D%E6%B8%85%E6%88%91%E7%9A%84%E4%BA%BA%E5%A3%B0%EF%BC%9F)