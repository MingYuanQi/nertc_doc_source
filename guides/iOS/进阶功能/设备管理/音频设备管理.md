
在音频场景中，您可能需要根据实际的场地情况选择采用音频的采集和播放设备，例如在室内场景中选用听筒进行音频播放。NERTC SDK 支持自由切换音频设备。


## <span id="注意事项">注意事项</span>

- 语音通话音频播放模式默认为扬声器模式。
- 在 iPad 设备上，音频播放模式只能使用扬声器模式，无法设置音频播放为听筒模式。
- 耳机连接时，自动使用耳机播放。此时即使设置音频播放设备为扬声器或听筒，仍旧使用耳机播放，耳机断开连接时，恢复音频播放设备的配置。

## <span id="实现方法">实现方法</span>

参考如下步骤，在您的项目中切换音频路由：

1. 在加入房间成功后调用 `getLoudspeakerMode:(bool *)enabled` 判断当前是听筒还是扬声器模式。
2. 调用 `setLoudspeakerMode:(bool)enable` 接口进行切换。

    - true：扬声器。
    - false：听筒。
3. 通过监听 `onNERtcEngineAudioDeviceRoutingDidChange` delegate 回调来监听音频路由切换事件。

## <span id="示例代码">示例代码</span>

```objc
    // 判断当前音频路由器。
    bool enabled = false;
    [self.engine getLoudspeakerMode:(&enabled)];

    // 设置音频路由。
    bool enableSpeakerMode = true;
    int result = [self.engine setLoudspeakerMode: enableSpeakerMode];

    - (void)onNERtcEngineAudioDeviceRoutingDidChange:(NERtcAudioOutputRouting)routing {
    NSString *currentAudioDevice;
        switch (routing) {
            case kNERtcAudioOutputRoutingHeadset:
                currentAudioDevice = @"耳机";
                break;
            case kNERtcAudioOutputRoutingEarpiece:
                currentAudioDevice = @"耳返";
                break;
            case kNERtcAudioOutputRoutingLoudspeaker:
                currentAudioDevice = @"扬声器";
                break;
            case kNERtcAudioOutputRoutingBluetooth:
                currentAudioDevice = @"蓝牙耳机";
            default:
                currentAudioDevice = @"Default";
                break;
        }
    }
```

## <span id="API参考">API参考</span>

 **方法** | **描述**
:--|:--
[setPlayoutDeviceMute](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a5ad7516261a0c05130f08b5e8a2f758e)|设置音频播放设备的状态
[getPlayoutDeviceMute](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a539f8b72e8ca292fbd4db93406ea8e87)|获取音频播放设备的状态
[setRecordDeviceMute](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a3fafb9e115bf5adc2d7d886f680438b1)|设置录音设备的状态
[getRecordDeviceMute](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a4c539b99cad03a7a40b6b7af5bf482fe)|获取录音设备的状态
[getLoudspeakerMode](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a37e18ff0850374423b0db987656487fc)|获取目前是否使用扬声器模式
[setLoudspeakerMode](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_i_n_e_rtc_engine_ex-p.html#a06bc1f897a55d4409def2425edd07117)|设置音频播放扬声器模式


音频设备回调：

**事件** | **描述**
:--|:--
[onNERtcEngineAudioDeviceRoutingDidChange](https://doc.yunxin.163.com/nertc/api-refer/iOS/doxygen/Latest/zh/html/protocol_n_e_rtc_engine_audio_session_observer-p.html#a57b56e0d4bdb5fffc7eff60d1a6e40a7)|音频输出设备改变回调
