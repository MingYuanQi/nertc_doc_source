本文介绍 NERTC SDK V5.X 版本，Windows 端升级的说明和注意事项。

## V5.5.10
从 V5.5.2 升级至 V5.5.10 版本，涉及如下接口变更，您需要结合实际业务场景更新相关的 App 代码：

**接口名称变更**

| 功能       | 原接口|新接口 |集成修改建议                                                           |
|----------------|--------------------------------------------------------------------|
| 设置空间音效的距离衰减属性和语音范围| `UpdateSpatializerAudioRecvRange` |[`setAudioRecvRange`](https://doc.yunxin.163.com/nertc/api-refer/windows/doxygen/Latest/zh/html/classnertc_1_1_i_rtc_engine_ex.html#aa2a512b95a1f7e63f7badbcee4bcf9c8)     | 若您使用了**空间音效**功能，请修改代码中对应的接口名称。      
|设置空间音效中说话者和接收者的空间位置信息 |`UpdateSpatializerSelfPosition` |[`updateSelfPosition`](https://doc.yunxin.163.com/nertc/api-refer/windows/doxygen/Latest/zh/html/classnertc_1_1_i_rtc_channel.html#a8a4e7c404d47e33f4a1cbff1f1284dfb) |^^
| 空间位置信息|`NERtcSpatializerPositionInfo` |[`NERtcPositionInfo`](https://doc.yunxin.163.com/nertc/api-refer/windows/doxygen/Latest/zh/html/structnertc_1_1_n_e_rtc_position_info.html) | 若您使用了**空间音效**功能，请修改代码中对应的结构体名称。


**接口行为变更**
| 变更描述       | 集成修改建议                                                           |
|----------------|--------------------------------------------------------------------|
| 切换房间（`switchChannel`）。 在直播场景中，原先只支持观众切换房间，修改为主播和观众都支持切换房间，并且切换后会保持切换前的音视频的状态。  |  请检查房间切换前后的音视频状态是否符合预期。       |   
| `onFirstVideoFrameDecoded` 回调的触发时机修改，当重新调用 `enableLocalVideo` 开启本地视频采集，或停止屏幕共享后再重新调用 `startScreenCapture` 接口共享屏幕时，都会触发该回调。|不影响 |


## V5.3.1
从 V4.6.X 升级至 V5.3.1 版本，涉及如下接口变更，您需要结合实际业务场景更新相关的 App 代码：

**接口行为变更**

| 序号 | 变更描述       | 集成修改建议                                                           |
|------|----------------|--------------------------------------------------------------------|
| 1    | 支持在不开麦的状态下默认开启伴音功能。   | 若您在 [setParameters](todo) 中设置了不开麦状态下开启伴音功能的开关(kNERtcKeyAudioMixSendEnabledWithoutMic)，删除相关代码片段即可。             |  
| 2    | 观众调用 `addLiveStreamTask` 方法添加房间推流任务，无需跟服务器进行信令交互，直接返回 30005。 | 根据返回的 30005 错误码直接判断当前角色不正确。 |  
| 3    | 开启屏幕共享接口 `startScreenCapture` 与开启本地视频辅流通道接口 [`enableLocalVideo`](https://doc.yunxin.163.com/nertc/api-refer/windows/doxygen/Latest/zh/html/classnertc_1_1_i_rtc_channel.html#a5c336b19e3c9b0db9a73b9515d7108d7) 互斥。| <ul><li>如果当前正在屏幕共享，调用 [`enableLocalVideo`](https://doc.yunxin.163.com/nertc/api-refer/windows/doxygen/Latest/zh/html/classnertc_1_1_i_rtc_channel.html#a5c336b19e3c9b0db9a73b9515d7108d7) 开启辅流时，需要调用`stopScreenCapture` 先停止屏幕共享。<li>如果当前正在使用本地视频辅流通道进行本地摄像头采集或者外部自定义视频输入，调用 `startScreenCapture` 开启屏幕共享时，需要先调用[`enableLocalVideo`](https://doc.yunxin.163.com/nertc/api-refer/windows/doxygen/Latest/zh/html/classnertc_1_1_i_rtc_channel.html#a5c336b19e3c9b0db9a73b9515d7108d7)停止辅流。  |
| 4    |视频采集数据回调 `onCaptureVideoFrame` 默认关闭。|若您使用了视频采集数据回调功能，请先调用 `setParameter(key：kNERtcKeyEnableVideoCaptureObserver)` 方法开启此回调。
| 5    |日志的默认存放路径变更。|Windows 端的默认日志路径调整为：EXE 同级目录下的 **logs** 文件夹，子目录的命名规则为`AppKey 前6位_AppKey hash值的前 9 位`。请根据新路径查找日志文件。

**接口参数变更**
| 序号 | 变更描述       | 集成修改建议                                                           |
|------|----------------|--------------------------------------------------------------------|
| 1    | 编码水印 `setLocalVideoWatermarkConfigs` 接口中，`NERtcVideoWatermarkTextConfig` 和 `NERtcVideoWatermarkTimestampConfig` 结构体里的 `fontPath` 名字改为 `fontName`。   | 若您使用了**编码水印**功能，请修改代码中对应的参数。             | 
|2     |废弃 `NERtcEngineContext` 里的 `log_file_max_size_KBytes` 字段。|删除相关字段。|