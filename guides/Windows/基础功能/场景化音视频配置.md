## <span id="功能描述">功能描述</span>
为方便开发者快速接入，降低开发者接入门槛，SDK 通过大量线上数据验证，沉淀出多种场景化配置方案。开发者可根据所需场景，选择对应的房间模式，SDK 将自动应用适合该场景的音视频编解码器、音视频参数、流控策略等配置，从而快速实现该场景下的最佳效果。当前支持场景包括标准 1v1 音视频通话、高画质 1v1 音视频通话、标准语聊房、高品质语聊房、会议。

::: note note
本文档主要介绍经典的音视频推荐配置，若还需要了解更多的详细参数配置，请参考 [设置音频属性](https://doc.yunxin.163.com/nertc/guide/DU4NjM3ODQ?platform=windows) 和 [设置视频属性](https://doc.yunxin.163.com/nertc/guide/zYwMTQyNzE?platform=windows)。
:::

## <span id="注意事项">注意事项</span>
- 同一个房间内的用户，建议使用同一种房间场景，以获得最佳效果。
- 若您的 App 有多种音视频业务场景，例如，同时有 1v1 音视频通话场景和标准语聊房场景。您可以在不销毁引擎  (destroyEngine) 的前提下，在退出房间后, 通过 [`setChannelProfile`](https://doc.yunxin.163.com/nertc/api-refer/windows/doxygen/Latest/zh/html/classnertc_1_1_i_rtc_engine.html#a6195db00acf739ca2cb183015abffd5b) 切换场景，然后再登录其他房间。
- 设置场景会影响音视频码率、帧率、视频分辨率、视频大小流模式、自动打开视频、自动订阅视频、传输策略。
- 调用 [`setChannelProfile`](https://doc.yunxin.163.com/nertc/api-refer/windows/doxygen/Latest/zh/html/classnertc_1_1_i_rtc_engine.html#a6195db00acf739ca2cb183015abffd5b) 将覆盖上一次调用此函数设置的场景。
- 调用 [`setChannelProfile`](https://doc.yunxin.163.com/nertc/api-refer/windows/doxygen/Latest/zh/html/classnertc_1_1_i_rtc_engine.html#a6195db00acf739ca2cb183015abffd5b) 函数设置场景类型为视频 1对1 呼叫场景、清晰度较高的 1对1 呼叫场景等 v5.5.40 新增的房间场景将覆盖您通过  [`setVideoConfig`](https://doc.yunxin.163.com/nertc/api-refer/windows/doxygen/Latest/zh/html/classnertc_1_1_i_rtc_engine_ex.html#a0f80132a269b2a7b8fca1a9dd2ca31cb) 和 [`setAudioProfile`](https://doc.yunxin.163.com/nertc/api-refer/windows/doxygen/Latest/zh/html/classnertc_1_1_i_rtc_engine_ex.html#a34c04a16ffdd9702636191073b3dbe99) 等 API 设置的音视频相关配置，因此建议先第一时间设置场景再通过其他 API 调整音视频配置。
- 版本 v5.5.40 之前就存在通信场景和直播场景，设置通信场景和直播场景，不会覆盖  [`setVideoConfig`](https://doc.yunxin.163.com/nertc/api-refer/windows/doxygen/Latest/zh/html/classnertc_1_1_i_rtc_engine_ex.html#a0f80132a269b2a7b8fca1a9dd2ca31cb) 和 [`setAudioProfile`](https://doc.yunxin.163.com/nertc/api-refer/windows/doxygen/Latest/zh/html/classnertc_1_1_i_rtc_engine_ex.html#a34c04a16ffdd9702636191073b3dbe99) 等 API 设置的音视频相关配置。

## <span id="实现方式">实现方式</span>

设置房间场景参数中的 `channelProfile` ([`NERtcChannelProfileType`](https://doc.yunxin.163.com/nertc/api-refer/windows/doxygen/Latest/zh/html/namespacenertc.html#ac30f4b7ce13da5d664df0d2a6986e940)) 字段指定一个场景，您可以根据实际音视频业务场景来选择。

### <span id="SDK 支持下列场景">SDK 支持下列场景</span>

<style>
table th:first-of-type {
    width: 25%;
}
table th:nth-of-type(2) {
    width: 34%;
}
table th:nth-of-type(3) {
    width: 41%;
}
</style>

| 场景 （支持版本：5.5.40 及以上） | 场景描述 | 关键配置说明 |
|---|---|---|
| VideoCall | 视频 1对1 呼叫场景。适用于 1v1 视频场景。| &bull; 分辨率：360P。 <br> &bull; 帧率：15 fps。 <br> &bull; 关闭视频大小流模式。 <br> &bull; 自动打开视频。<br> &bull; 自动订阅视频。<br> &bull; 传输策略为保清晰度，高码流。<br> &bull; 音频编码采样率为16k，码率为20kbps。 |
| HighQualityVideoCall | 清晰度较高的 1对1 呼叫场景，与VideoCall 场景类似，但该场景默认采用了比 StandardVideoCall 场景更高的视频配置，适用于对画质要求较高的视频通话场景。|  &bull; 分辨率：540P。 <br> &bull; 帧率：15 fps。 <br> &bull; 关闭视频大小流模式。 <br> &bull; 自动打开视频。<br> &bull; 自动订阅视频。<br> &bull; 传输策略为保清晰度，高码流。 |
| Chatroom | 语聊房场景，此场景默认不开启摄像头。建议存在音乐的语聊房场景选择高品质语聊房场景配置。| &bull; 取消自动打开视频。 <br> &bull; 传输策略为保清晰度，高码流。<br> &bull; 音频编码采样率为48k，码率为48kbps。| 
| HighQualityChatroom | 高品质语聊房场景，与 Chatroom 场景类似，但此场景默认采用了比 Chatroom 场景下更高的音频配置，适用于对音质要求较高的多人纯语音通话场景。| &bull; 取消自动打开视频。 <br> &bull; 传输策略为保清晰度，高码流。<br> &bull; 音频编码采样率为48k，码率为96kbps。| 
| Meeting | 会议场景。| &bull; 分辨率：720P。<br> &bull; 帧率：30 fps。<br> &bull; 取消自动打开视频。<br> &bull; 传输策略为清晰度和帧率平衡，低码流。<br> &bull; 音频编码采样率为24k，码率为48kbps。| 

## <span id="示例代码">示例代码</span>

调用 [`setChannelProfile`](https://doc.yunxin.163.com/nertc/api-refer/windows/doxygen/Latest/zh/html/classnertc_1_1_i_rtc_engine.html#a6195db00acf739ca2cb183015abffd5b) 函数设置场景类型为视频 1对1 呼叫场景、清晰度较高的 1对1 呼叫场景等 v5.5.40 新增的房间场景将覆盖您通过 [`setVideoConfig`](https://doc.yunxin.163.com/nertc/api-refer/windows/doxygen/Latest/zh/html/classnertc_1_1_i_rtc_engine_ex.html#a0f80132a269b2a7b8fca1a9dd2ca31cb) 和 [`setAudioProfile`](https://doc.yunxin.163.com/nertc/api-refer/windows/doxygen/Latest/zh/html/classnertc_1_1_i_rtc_engine_ex.html#a34c04a16ffdd9702636191073b3dbe99) 等 API 设置的音视频相关配置，因此建议先第一时间设置场景再通过其他 API 调整音视频配置。

### <span id="视频 1对1 呼叫场景">视频 1对1 呼叫场景</span>
```
// 初始化引擎
rtc_engine_->initialize(rtc_engine_context_);
// 设置房间场景为 VideoCall，会关闭视频大小流模式、打开视频、自动订阅视频、视频格式为 640x360/480 @ 15 fps、传输策略为保清晰度，高码流、音频编码采样率为16k，码率为20kbps。
rtc_engine_->setChannelProfile(nertc::kNERtcChannelProfileVideoCall);
```

如果想在 1v1 场景将视频分辨率改为 720P 15帧，请参考以下示例代码：

```
// 初始化引擎
rtc_engine_->initialize(rtc_engine_context_);
// 设置房间场景为 VideoCall，会关闭视频大小流模式、打开视频、自动订阅视频、视频格式为 640x360/480 @ 15 fps、传输策略为保清晰度，高码流、音频编码采样率为16k，码率为20kbps。
rtc_engine_->setChannelProfile(nertc::kNERtcChannelProfileVideoCall);

NERtcVideoConfig videoConfig;
videoConfig.width = 1280;// 设置分辨率宽
videoConfig.height = 720;// 设置分辨率高
videoConfig.frameRate = kNERtcVideoFramerateFps_15; //视频帧率
nrtc_engine_->setVideoConfig(kNERTCVideoStreamMain,videoConfig);
```
#### <span id="典型错误">典型错误</span>

如果在 `setChannelProfile` 之前先设置 `setVideoConfig`，那么 `setChannelProfile` 将覆盖 `setVideoConfig` 的设置。

```
// 初始化引擎
rtc_engine_->initialize(rtc_engine_context_));

NERtcVideoConfig videoConfig;
videoConfig.width = 1280;// 设置分辨率宽
videoConfig.height = 720;// 设置分辨率高
videoConfig.frameRate = kNERtcVideoFramerateFps_15; //视频帧率
nrtc_engine_->setVideoConfig(kNERTCVideoStreamMain,videoConfig);

// 设置房间场景为 VideoCall，会关闭视频大小流模式、打开视频、自动订阅视频、视频格式为 640x360/480 @ 15 fps、传输策略为保清晰度，高码流、音频编码采样率为16k，码率为20kbps。
rtc_engine_->setChannelProfile(nertc::kNERtcChannelProfileVideoCall);
```

### <span id="语聊房场景">语聊房场景</span>

```
// 初始化引擎
rtc_engine_->initialize(rtc_engine_context_));
// 设置房间场景为语聊房，传输策略为保清晰度，高码流、音频编码采样率为48k，码率为48kbps、会关闭视频大小流模式、关闭自动打开视频、关闭自动订阅视频、视频格式为 640x360/480 @ 15 fps。
rtc_engine_->setChannelProfile(nertc::kNERtcChannelProfileChatroom);
```
如果想在语聊房场景将音频编码采样率为48k，码率为80kbps，请参考以下示例代码：

```
// 初始化引擎
rtc_engine_->initialize(rtc_engine_context_);
// 设置房间场景为语聊房，传输策略为保清晰度，高码流、音频编码采样率为48k，码率为48kbps、会关闭视频大小流模式、关闭自动打开视频、关闭自动订阅视频、视频格式为 640x360/480 @ 15 fps。
rtc_engine_->setChannelProfile(nertc::kNERtcChannelProfileChatroom);

//设置音频属性，采样率为 48 kHz、音乐编码、双声道、编码码率最大值为 80 Kbps。
rtc_engine_->setAudioProfile(kNERtcAudioProfileMiddleQualityStereo);
```
#### <span id="典型错误">典型错误</span>

如果在 `setChannelProfile` 之前先设置 `setAudioProfile`，那么 `setChannelProfile` 将覆盖 `setAudioProfile` 的设置。

```
// 初始化引擎
rtc_engine_->initialize(rtc_engine_context_);

//设置音频属性，采样率为 48 kHz、音乐编码、双声道、编码码率最大值为 80 Kbps。
rtc_engine_->setAudioProfile(kNERtcAudioProfileMiddleQualityStereo);

// 设置房间场景为语聊房，传输策略为保清晰度，高码流、音频编码采样率为48k，码率为48kbps、会关闭视频大小流模式、关闭自动打开视频、关闭自动订阅视频、视频格式为 640x360/480 @ 15 fps。
rtc_engine_->setChannelProfile(nertc::kNERtcChannelProfileChatroom);
```

### <span id="会议场景">会议场景</span>

```
// 初始化引擎
rtc_engine_->initialize(rtc_engine_context_));
// 设置房间场景为会议，会打开视频大小流模式、关闭自动打开视频、关闭自动订阅视频、视频格式为 1280x720/ @ 30 fps、传输策略为清晰度和帧率平衡，低码流、音频编码采样率为24k，码率为48kbps。
rtc_engine_->setChannelProfile(nertc::kNERtcChannelProfileMeeting);
```

如果想在会议场景将视频分辨率改为 360P 15帧、入会自动打开视频，请参考以下示例代码：

```
// 初始化引擎
// 初始化引擎
rtc_engine_->initialize(rtc_engine_context_);
// 设置房间场景为会议，会打开视频大小流模式、关闭自动打开视频、关闭自动订阅视频、视频格式为 1280x720/ @ 30 fps、传输策略为清晰度和帧率平衡，低码流、音频编码采样率为24k，码率为48kbps。
rtc_engine_->setChannelProfile(nertc::kNERtcChannelProfileMeeting);

NERtcVideoConfig videoConfig;
videoConfig.width = 640;// 设置分辨率宽
videoConfig.height = 480;// 设置分辨率高
videoConfig.frameRate = kNERtcVideoFramerateFps_15; //视频帧率
nrtc_engine_->setVideoConfig(kNERTCVideoStreamMain,videoConfig);

nrtc_engine_->enableLocalVideo(true); //打开视频
```

#### <span id="典型错误">典型错误</span>

如果在 `setChannelProfile` 之前先设置 `enableLocalVideo` 和 `setVideoConfig`，那么 `setChannelProfile` 将覆盖 `enableLocalVideo` 和 `setVideoConfig` 的设置。

```
// 初始化引擎
rtc_engine_->initialize(rtc_engine_context_);

NERtcVideoConfig videoConfig;
videoConfig.width = 640;// 设置分辨率宽
videoConfig.height = 480;// 设置分辨率高
videoConfig.frameRate = kNERtcVideoFramerateFps_15; //视频帧率
nrtc_engine_->setVideoConfig(kNERTCVideoStreamMain,videoConfig);

nrtc_engine_->enableLocalVideo(true); //打开视频

// 设置房间场景为会议，会打开视频大小流模式、关闭自动打开视频、关闭自动订阅视频、视频格式为 1280x720/ @ 30 fps、传输策略为清晰度和帧率平衡，低码流、音频编码采样率为24k，码率为48kbps。
rtc_engine_->setChannelProfile(nertc::kNERtcChannelProfileMeeting);
```
