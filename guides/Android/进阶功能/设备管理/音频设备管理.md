
在音频场景中，您可能需要根据实际的场地情况选择采用音频的采集和播放设备，例如在室内场景中选用听筒进行音频播放。NERTC SDK 支持自由切换音频设备。

## <span id="注意事项">注意事项</span>

耳机连接时，自动使用耳机播放。此时即使设置音频播放设备为扬声器或听筒，仍旧使用耳机播放，耳机断开连接时，恢复音频播放设备的配置。

## <span id="实现方法">实现方法</span>

参考如下步骤，在您的项目中切换音频路由：

1. 在加入房间成功后调用 [`isSpeakerphoneOn`](https://doc.yunxin.163.com/nertc/api-refer/android/doxygen/Latest/zh/html/classcom_1_1netease_1_1lava_1_1nertc_1_1sdk_1_1_n_e_rtc_ex.html#ae5460012b115cade874131d2b31794d9) 判断当前是听筒还是扬声器模式。
2. 调用 [`setSpeakerphoneOn`](https://doc.yunxin.163.com/nertc/api-refer/android/doxygen/Latest/zh/html/classcom_1_1netease_1_1lava_1_1nertc_1_1sdk_1_1_n_e_rtc_ex.html#a8531f762d97822bfb2b99e07aef38e95) 接口进行切换。
    
    - true：扬声器。
    - false：听筒。
3. 通过监听 [`onAudioDeviceChanged`](https://doc.yunxin.163.com/nertc/api-refer/android/doxygen/Latest/zh/html/interfacecom_1_1netease_1_1lava_1_1nertc_1_1sdk_1_1_n_e_rtc_callback_ex.html#a5142f0ed83fdce1e4c3aa2645dccb320) 回调来监听音频路由切换事件。


## 示例项目源码
网易云信提供[设备管理的示例项目源码 DeviceManagement](https://github.com/netease-im/G2-API-Examples/tree/main/android/Advance/DeviceManagement) ，您可以参考该源码实现音频设备管理。

## <span id="示例代码">示例代码</span>

```
    // 判断当前音频路由器。
    boolean isSpeakerphoneOn = NERtcEx.getInstance().isSpeakerphoneOn();
    
    // 设置音频路由。
    NERtcEx.getInstance().setSpeakerphoneOn(isSpeakerphoneOn);
    
    // 音频路由切换回调。
    public void onAudioDeviceChanged(int selected) {
        String audioDevice;
        switch (selected) {
            case NERtcConstants.AudioDevice.EARPIECE:
                audioDevice = "听筒";
                break;
            case NERtcConstants.AudioDevice.BLUETOOTH_HEADSET:
                audioDevice = "蓝牙耳机";
                break;
            case NERtcConstants.AudioDevice.SPEAKER_PHONE:
                audioDevice = "扬声器";
                break;
            case NERtcConstants.AudioDevice.WIRED_HEADSET:
                audioDevice = "有线耳机";
                break;
            default:
                audioDevice = "EARPIECE";
                break;
        }
    }
```

## <span id="API参考">API参考</span>


**方法** | **功能描述**
:--|:--
[setPlayoutDeviceMute](https://doc.yunxin.163.com/nertc/api-refer/android/doxygen/Latest/zh/html/classcom_1_1netease_1_1lava_1_1nertc_1_1sdk_1_1_n_e_rtc_ex.html#a7023b6d9da4269b8441bcef3ec8c2964)|设置是否音频播放静音。
[setRecordDeviceMute](https://doc.yunxin.163.com/nertc/api-refer/android/doxygen/Latest/zh/html/classcom_1_1netease_1_1lava_1_1nertc_1_1sdk_1_1_n_e_rtc_ex.html#a310290f3cc73b558402c0d20ba7e3276)|设置是否音频采集静音。
[isSpeakerphoneOn](https://doc.yunxin.163.com/nertc/api-refer/android/doxygen/Latest/zh/html/classcom_1_1netease_1_1lava_1_1nertc_1_1sdk_1_1_n_e_rtc_ex.html#ae5460012b115cade874131d2b31794d9) |查看扬声器是否开启。
[setSpeakerphoneOn](https://doc.yunxin.163.com/nertc/api-refer/android/doxygen/Latest/zh/html/classcom_1_1netease_1_1lava_1_1nertc_1_1sdk_1_1_n_e_rtc_ex.html#a8531f762d97822bfb2b99e07aef38e95)|设置扬声器是否开启。

音频设备回调：

**事件** | **功能描述** 
:--|:--
[onAudioDeviceChanged](https://doc.yunxin.163.com/nertc/api-refer/android/doxygen/Latest/zh/html/interfacecom_1_1netease_1_1lava_1_1nertc_1_1sdk_1_1_n_e_rtc_callback_ex.html#a5142f0ed83fdce1e4c3aa2645dccb320)|语音播放设备发生改变