本文汇总了集成小程序 SDK 的云信开发者在各个场景实践过程中的**易错问题**以及对应的**解题思路**，帮助您避开别人踩过的坑，为您的开发提效加速。

- <a href="#为什么我说话时，对端听不到？">为什么我说话时，对端听不到？</a>
- <a href="#关闭再开启摄像头后，远端小程序看不到视频流">关闭再开启摄像头后，远端小程序看不到视频流</a>


## <span id="为什么我说话时，对端听不到？">为什么我说话时，对端听不到？</span>

**问题描述**：

小程序用户和 Native 端用户通话时，对方听不到小程序用户说话的声音。

**问题原因**：

小程序端调用 [client.publish](https://doc.yunxin.163.com/docs/interface/NERTC_SDK/Latest/MiniApp/Client.html#publish__anchor) 方法发布本地音视频流时，将 `mediaType` 设置成了 video，表示只发布视频流而不发布音频流。

**解决方案**：

1. 发布音视频流时，[client.publish](https://doc.yunxin.163.com/docs/interface/NERTC_SDK/Latest/MiniApp/Client.html#publish__anchor) 中 `mediaType` 应设置为''，表示空字符串。
2. 发布纯音频流时，[client.publish](https://doc.yunxin.163.com/docs/interface/NERTC_SDK/Latest/MiniApp/Client.html#publish__anchor) 中 `mediaType` 应设置为 audio。
3. 发布纯视频流时，[client.publish](https://doc.yunxin.163.com/docs/interface/NERTC_SDK/Latest/MiniApp/Client.html#publish__anchor) 中 `mediaType` 应设置为 video。

## <span id="关闭再开启摄像头后，远端小程序看不到视频流">关闭再开启摄像头后，远端小程序看不到视频流</span>

**问题描述**：

小程序端 A 开启摄像头后，关闭摄像头，再开启摄像头，此时其他端（例如 Android 端和 PC 端）可以看到小程序 A 的视频流，但小程序端 B 看不到视频流。

**问题原因**：

关闭再开启摄像头时，没有重新发起推流，而是复用了之前的连接发流，小程序网关没有感知到这个变化，导致没有及时通知远端小程序收流。

**解决方案**：

1. unpub 视频的时候把 live-pusher 清除掉（建议同时清除 xml 页面上的 live-pusher 组件）。
2. 然后再 pub 视频的时候，再重新创建 live-pusher 组件去重新推流（开启麦克风也是建议同样操作）。